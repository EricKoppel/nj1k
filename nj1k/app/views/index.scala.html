@(news: List[NewsEntity], recentAscents: List[AscentEntity], signupForm: Form[RegisteringUser], mountains: List[MountainEntity])
@import java.text.SimpleDateFormat
@import views.RenderUtil._
@import utils.SecurityUtil._
@import helper._

@main(title = Messages("welcome.header")) {
<meta name="description" content="NJ1K.org - A website dedicated to peakbagging in New Jersey. Climb New Jersey's 52 peaks over 1,000 feet. Peakbagging in the humble hills of New Jersey.">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.css">
<link rel="stylesheet" href="@routes.Assets.at("javascripts/jQuery-File-Upload-9.7.0/css/jquery.fileupload.css")">
} {
	@registermodal(signupForm)

	<div class="jumbotron hidden-sm hidden-xs">
		<div class="container">
			<div class="row">
				<div itemscope itemtype="https://schema.org/Organization" class="col-md-12">
					<h1 itemprop="name">@Messages("welcome.header")</h1>
					<p itemprop="description"><strong>@formatText(Messages("welcometext"))</strong></p>
					<p><small>The New Jersey 1K Club seeks to bring attention to the many hiking opportunities and challenges that the Garden State has to offer. New Hampshire has the AMC 4000'ers; the Adirondacks has its 46'ers; the Catskills and its 3500 Club. And now . . . New Jersey's own peakbagging club: the 1K'ers.</small></p>
					@if(!isLoggedIn()) {
						<button class="btn btn-success btn-lg" data-toggle="modal" data-target="#myModal">
							<span class="glyphicon glyphicon-check"></span>
							<span>@Messages("menu.register")</span>
						</button>
					}
				</div>
			</div>
		</div>
	</div>
} {

	

	<div class="row">
		<div class="col-md-8">
			@if(isLoggedIn()) {
				@quickascent(mountains)
			}
			
			<div id="infiniteScroll">
			@recentAscentsPanel(recentAscents, 1, 5)
			</div>
		</div>
		<div class="col-md-4 hidden-xs">
			<h3 style="text-align: center;">Recent Headlines</h3>
			@for(n <- news) {
				<div class="media" style="border-bottom: 1px solid #ddd">
					@if(!n.pictures.isEmpty()) {
						<a class="hidden-xs pull-right" href="@routes.NewsController.showNews(n.id)">
							<img alt="@n.title" width="64" height="64" class="media-object" src="@routes.NewsImageController.getImage(n.pictures.get(0).id)">
						</a>
					}
					<div class="media-body">
						<h4 class="media-heading"><a href="@routes.NewsController.showNews(n.id)"><strong><em>@n.title</em></strong></a></h4>
							<p>
								<strong>@formatAscentDate(n.news_date) - </strong>
								@Html(formatNews(n.entry))
							</p>
							<p><a href="@routes.NewsController.showNews(n.id)"><em>Read More...</em></a></p>
					</div>
				</div>
			}
			
			<div style="margin-bottom: 30px;"></div>
		</div>
		<div id="externalNews" class="col-md-4 hidden-xs">
			<h3 style="text-align: center;">@Messages("news.nynjtc")</h3>
		</div>
	</div>
	
	<script type="text/javascript">
		require(['jquery'], function() {
			jsRoutes.controllers.ExternalNewsController.getNewsFromNYNJTC().ajax({
	  		  success: function(data) {
	  			  $.each(data, function(i, item) {
	  				  var r = jsRoutes.controllers.ExternalNewsController.getNewsArticleFromNYNJTC(item.link);
	  				  var mediaBody = $('<div class="media-body">');
	  				  $(mediaBody).append('<h4 class="media-heading"><strong><em><a target="_blank" href="' + item.link + '">' + item.title + '</a></em></strong></h4>');
	  				
	  				  $('<div class="media" style="border-bottom: 1px solid #ddd">').append(mediaBody).appendTo('#externalNews');
	  				  
	  				  $.ajax({
	  					  url: r.url,
	  					  cache: true,
	  					  success: function(data) {
	  	    				  $(mediaBody).append('<p><strong>' + item.date + ' - </strong>' + data + ' <p><a target="_blank" href="' + item.link + '"><em>Read More...</em></a></p>');
	  					  }
	  				  });
	  			  });
				}
			});
		});
	</script>
}